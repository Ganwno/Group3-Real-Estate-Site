<%
#   Created: Daniel Swain
#   Date: 20/04/2016
#   
#   Partial erb used by any page.
#   This represents the modal used to either sign up or log in
#      
#   Todo:
#   	* Form field validation
#   	* Connect to the actual user signup and login actions
#   	* Change forgotten password link to point to correct action. Currently points to buy_path
%>

<% # The status modal %>
<div class="ui user-login-signup modal" id="user-login-signup-modal">
	<% # Modal header %>
	<div class="header">
		Welcome to Propertydome
	</div>
	
	<% # Modal content %>
	<div class="content">
		<div class="ui centered middle aligned grid">
			<% # Choose either login or sign up %>
			<div class="row">
				<div class="ui buttons">
					<button class="ui button" id="user-login-button">Login</button>
					<button class="ui button" id="user-sign-up-button">Sign Up</button>
				</div>
			</div>
			
			<% # The facebook button. This is a placeholder and will be replaced with code from Facebook soon %>
			<div class="row margin-top-half">
				<button class="ui social-user-button facebook-button button">
					<%= image_tag "f-logo.png", class: "icon" %>
					<span class="user-action"></span> with Facebook
				</button>
			</div>
			<% # The Google button. This is a placeholder and will be replaced with code from Google soon %>
			<div class="row">
				<button class="ui social-user-button google-button button">
					<%= image_tag "g-logo.png", class: "icon" %>
					<span class="user-action"></span> with Google
				</button>
			</div>
			<% # An or, just like Jaydens design %>
			<div class="row margin-top-half">
				or
			</div>
			<% # The username/email and password form fields %>
			<div class="row margin-top-half">

				<% # Sign Up form modified from devise %>
				<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
					<%= devise_error_messages! %>
					<% # User sign up username field %>
					<div class="field">
						<div class="ui left icon input">
							<i class="inverted mail icon"></i>
							<%= f.email_field :email, autofocus: true %>
						</div>
					</div>
					<% # User sign up password field %>
					<div class="field">
						<div class="ui left icon input">
							<i class="inverted unlock alternative icon"></i>
							<% if @minimum_password_length %>
								<em>(<%= @minimum_password_length %> characters minimum)</em>
							<% end %><br />
							<%= f.password_field :password, autocomplete: "off" %>
						</div>
					</div>
					<% # User confirm password field, only shown if signing-up %>
					<div class="field">
						<div class="ui left icon input">
							<i class="inverted unlock alternative icon"></i>
							<%= f.password_field :password_confirmation, autocomplete: "off" %>
						</div>
					</div>
					<div class="actions">
						<%= f.submit "Sign Up" %>
					</div>
				<% end %>
				
			</div>
			<% # Forgotten password link %>
			<div class="row" id="user-login-reminder">
				<%= link_to "Forgotten your password?", buy_path %>
			</div>
		</div>
	</div>

	<% # The action buttons %>
	<div class="actions">
		<div class="ui centered one column grid">
			<div class="ui eight wide column">
				<% # The action for this are set in user_login.coffee in the onDeny and onApprove callbacks for the modal %>
				<div class="ui fluid approve active-choice button"><span class="user-action"></span></div>
			</div>
		</div>
	</div>
</div>